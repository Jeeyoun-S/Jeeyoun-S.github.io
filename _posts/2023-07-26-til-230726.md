---
title: TIL. Git 동작 원리
tags: [TIL, Git]
style: fill
color: success
description: Git의 동작 원리 이해하기
---

1. this unordered seed list will be replaced by toc as unordered list
{:toc}

[Git 기초](https://jeeyoun-s.github.io/blog/git)에 대해서는 이 블로그 첫 게시물에서 다뤘었다. 매 프로젝트마다 Git을 사용했고 Git Bash, VSC, IntelliJ 등에서 Git을 사용해 본 경험이 있다. 그러나 구체적으로 Git의 내부 동작 방식에 대해서는 모르고 있었기에, 이 부분에 대해 공부를 해봤다.

## Git 내부  (.git)
git init을 하거나 git clone을 해 로컬 컴퓨터에 git 저장소를 만들면 .git이라는 폴더를 확인할 수 있는데, 이 폴더에는 어떤 정보가 저장되어 있는지 알아보고자 한다.

### /index 파일
.git/index는 git add 명령어를 통해 Staging Area에 있는 파일들의 정보를 저장한다. 저장형식은 'mode object stage file'이다. 예를 들면 '100644 e579ae4c9106f3b62fb9203ec5b49d8014d87cfd 0 blog/README.md'와 같다.

- mode
    - 타입과 권한을 의미
    - 100644는 일반 파일, 100755는 실행 가능한 일반파일

- object
    - 파일 내용을 담고 있는 Blob 폴더 + 파일명
    - SHA1 값으로 40자

- stage

- file
    - .git 상위 폴더로부터의 파일의 상대경로 + 파일명

### /objects/폴더
.git/objects에는 버전 관리를 위해 필요한 데이터, 즉 git에서 사용하는 데이터가 저장된다. objects의 구성은 아래와 같다.

1. 파일에 담긴 값을 SHA1를 이용해 해시한 값 40자 중 2자는 폴더명, 38자는 파일명으로
2. SHA1로 해시한 값이 파일의 식별자
3. 파일의 형태는 Blob, Tree, Commit, Tag가 존재

#### Blob 파일

#### Tree 파일

#### Commit 파일

### 

## 명령어 동작 과정

## 미니 회고록

오늘 처음으로 CLI 프로그램을 만들어봤는데, 새로운 경험이었다. 코드 자체는 초기 설정만 다를 뿐 그 후에는 기존에 입출력과 크게 다른 점은 없었다. 나중에는 다른 언어로도 CLI 프로그램을 만들 수 있는지, 만들 수 있다면 어떻게 만드는지도 궁금해졌다.

## 참고자료
- [.git 내부 구조 파헤치기](https://tecoble.techcourse.co.kr/post/2021-07-08-dot-git/)
- [[Git] 내부 동작 원리에 대한 이해](https://it-eldorado.tistory.com/4)
- [Git 좀 잘 써보자](https://wikidocs.net/book/1902)
- [git index](https://johngrib.github.io/wiki/git/index/)